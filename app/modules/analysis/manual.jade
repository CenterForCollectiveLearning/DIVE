.viz-viewport(layout-fill='', layout='column', layout-align='starter', flex='')

  md-toolbar.segmentation-block(ng-class="{'extended': manualCtrl.selectedParams.field_a}")
    .md-toolbar-tools
      h3.category-title
        span Analyse

      md-autocomplete(ng-if="manualCtrl.datasetsLoaded", md-items="d in manualCtrl.datasets", md-item-text="d.title", placeholder="Dataset", md-min-length="0", md-search-text="datasetQuery", md-selected-item="manualCtrl.selectedDataset", md-selected-item-change="manualCtrl.onSelectDataset(d)")
        md-item-template
          span(md-highlight-text="datasetQuery") {{d.title}}
        md-not-found
          span No matches found.

      .first-segment-selector(ng-if="manualCtrl.selectedDataset")
        .phrase
          span with
        .selector
          md-select(ng-model="manualCtrl.selectedParams.model", md-on-close="manualCtrl.onSelectModel()")
            md-option(ng-repeat="m in manualCtrl.MODELS", ng-value="m.value")
              | {{ m.title }}

      .second-segment-selector(ng-if="manualCtrl.selectedParams.model")
        .phrase
          span using
        .selector
          md-select(ng-model="manualCtrl.selectedParams.arguments.estimator", md-on-close="manualCtrl.onSelectEstimator()")
            md-option(ng-repeat="e in manualCtrl.ESTIMATORS", ng-value="e.value")
              | {{ e.title }}

  //- .toolbar-extension(ng-if="manualCtrl.selectedParams.field_a")
  //-   .toolbar-extension-component(layout='row')
  //-     h3.category-title
  //-       span Conditionals

  //-     md-autocomplete(md-items="a in manualCtrl.getAttributes()", md-item-text="a.label", placeholder="field", md-min-length="0", md-search-text="conditionalFieldQuery", md-selected-item="manualCtrl.conditional1Field", md-selected-item-change="manualCtrl.onSelectConditional1Field()")
  //-       md-item-template
  //-         span(md-highlight-text="manualCtrl.conditional1Field") {{a.label}}

  //-     md-select.select-small(ng-if='manualCtrl.conditional1IsNumeric' ng-disabled='!manualCtrl.conditional1Field', ng-model="manualCtrl.conditional1.operation")
  //-       md-option(ng-repeat="o in manualCtrl.OPERATORS.NUMERIC", ng-value="o.value")
  //-         | {{o.title}}

  //-     md-select.select-small(ng-if='!manualCtrl.conditional1IsNumeric' ng-disabled='!manualCtrl.conditional1Field', ng-model="manualCtrl.conditional1.operation")
  //-       md-option(ng-repeat="o in manualCtrl.OPERATORS.DISCRETE", ng-value="o.value")
  //-         | {{o.title}}

  //-     md-input-container(ng-if='manualCtrl.conditional1IsNumeric', ng-disabled='!manualCtrl.conditional1.operation || !manualCtrl.conditional1Field')
  //-       input(type="text", ng-model="manualCtrl.conditional1.criteria", ng-change="manualCtrl.onChangeConditional()", ng-disabled='!manualCtrl.conditional1.operation || !manualCtrl.conditional1Field')

  //-     md-autocomplete(
  //-       ng-if='!manualCtrl.conditional1IsNumeric'
  //-       md-items="value in manualCtrl.getConditional1Values()",
  //-       md-item-text="value",
  //-       placeholder="",
  //-       md-min-length="0",
  //-       md-search-text="conditionalValueQuery",
  //-       md-selected-item="manualCtrl.conditional1.criteria",
  //-       md-selected-item-change="manualCtrl.onChangeConditional()"
  //-     )
  //-       md-item-template
  //-         span(md-highlight-text="manualCtrl.conditional1.criteria") {{value}}

  //- visualization(spec='manualCtrl.selectedParams', data='manualCtrl.visualizationData')
  //-   md-content(flex='', layout='column')
  //-     .visualization(flex='', layout='row')
  //-       .left-side(layout='column', flex='')
  //-         md-progress-linear(md-mode='indeterminate', ng-if='loadingViz', flex='')
  //-         #viz-container(flex='')

  datatable(ng-if='manualCtrl.tableData.data' data='manualCtrl.tableData.data', selector=".datatable", headers='manualCtrl.tableData.columns', rowheader='false', height=1000, sortindex=1, sortorder='false')
    .datatable

