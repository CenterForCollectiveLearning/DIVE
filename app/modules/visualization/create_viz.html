<section class="left-pane" ng-class="{'closed': leftClosed}" maxheight>
  <div class="pane-title">
    Visualization Types
  </div>
  <ul class="pane-items">
    <li ng-repeat="type in types" class="dataset" ng-click="select_type($index)" ng-class="{'selected':$index==selected_type_index}">
      <span class="vertical-center title">{{type.name | capitalize}}</span>
      <span class="count">{{type.length}}</span>
      <div class="right">
        <img src="/assets/images/{{type.icon}}" />
      </div>      
    </li>
  </ul>
</section>

<section class="right-pane" ng-class="{'closed': rightClosed}" maxheight>
  <div class="pane-title">
    Visualization Specifications
  </div>
  <ul class="pane-items">
    <li ng-repeat="spec in specs" ng-click="select_spec($index);" ng-class="{'selected':$index==selected_spec_index, 'chosen':spec.chosen}">
      <div ng-if="selected_type=='treemap' || selected_type=='geomap' || selected_type=='piechart'">
        <div>Group all <b>{{spec.aggregate.title}}</b></div>
        <div>by <b>{{spec.groupBy.title}}</b></div>

        <div class="choose" ng-if="$index==selected_spec_index">
          <div class="select" ng-click="choose_spec($index); $event.stopPropagation();">
            <img src="/assets/images/check.svg" />
          </div>
          <div class="reject" ng-click="reject_spec($index); $event.stopPropagation();">
            <img src="/assets/images/cross.svg" />
          </div>
        </div>
      </div>
      <div ng-if="selected_type=='scatterplot' || selected_type=='linechart' || selected_type=='barchart'">
        <div ng-if="spec.aggregation">Total number by</div>

        <div><b>{{spec.x.title}}</b></div> 
        <div ng-if="!spec.aggregation">vs. <b>{{spec.y.title}}</b></div>
        <div class="choose" ng-if="$index==selected_spec_index">
          <div class="select" ng-click="choose_spec($index); $event.stopPropagation();">
            <img src="/assets/images/check.svg" />
          </div>
          <div class="reject" ng-click="reject_spec($index); $event.stopPropagation();">
            <img src="/assets/images/cross.svg" />
          </div>
        </div>
      </div>
    </li>
  </ul>
</section>

<section class="viewport" ng-class="{'right-closed': rightClosed, 'left-closed': leftClosed}" maxheight>
  <pane-toggle></pane-toggle>
  <loader></loader>
  <div id="viz-container"></div>
  <visualization-preview viz-type="selected_type" viz-spec="selected_spec" viz-data="vizData" conditional="selectedConditionalValues"></visualization-preview>

  <section class="conditionals">
    <div class="title">Conditionals</div>
    <ul class="conditional-options">
      <li class="conditional-option" ng-repeat="conditionalOption in conditionalOptions" ng-click="selectConditional(conditionalOption)" ng-class="{'selected':selectedConditional(conditionalOption.name)}">
        {{conditionalOption.name}}
      </li>
    </ul>
    <div class="dropdowns">
    <ul class="dropdowns">
      <li ng-repeat="(title, data) in selectedConditionalData">
        <label class="dropdown-label">{{title}}</label>
        <select ng-model="selectedConditionalValues[currentdID][title]" ng-options="datum for datum in data" ng-change="changedConditional()" ng-init="selectedConditionalValues[currentdID][title]=data[0]"></select>
      </li>
    </ul>
  </div>
  </section>
</section>