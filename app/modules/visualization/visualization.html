<section class="left-pane" ng-class="{'closed': leftClosed}" maxheight>
  <div class="pane-title">
    Visualization Types
  </div>
  <ul class="pane-items">
    <li ng-repeat="type in types" class="dataset" ng-click="selectType($index)" ng-class="{'selected':$index==selectedTypeIndex}">
      <span class="vertical-center title">{{type.name | capitalize}}</span>
      <span class="count">{{type.length}}</span>
      <div class="right">
        <img src="/assets/images/{{type.icon}}" />
      </div>      
    </li>
  </ul>
</section>

<section class="right-pane viz-selection" ng-class="{'closed': rightClosed}" maxheight>
  <div class="pane-title">
    Visualization Specifications
  </div>
  <div class="filter fixed">
    Filter
  </div>
  <div class="sort fixed">
    Sorting
    <select ng-options="sorting.property as sorting.display for sorting in sortings" ng-model="selectedSorting" ng-change='sortSpecs()'></select>
    <select ng-options="sortOrder.property as sortOrder.display for sortOrder in sortOrders" ng-model="selectedSortOrder" ng-change='sortSpecs()'></select>
  </div>
  <ul class="pane-items">
    <li ng-repeat="spec in specs" ng-click="selectSpec($index);" ng-class="{'selected':$index==selectedSpecIndex, 'chosen':spec.chosen==true, 'rejected': spec.chosen==false}">
      <div ng-if="selectedType=='treemap' || selectedType=='geomap' || selectedType=='piechart'">
        <div>Group all <b>{{spec.aggregate.title}}</b></div>
        <div>by <b>{{spec.groupBy.title}}</b></div>
      </div>
      <div ng-if="selectedType=='scatterplot' || selectedType=='linechart' || selectedType=='barchart'">
        <div ng-if="spec.aggregation">Total number by</div>
        <div><b>{{spec.x.title}}</b></div> 
        <div ng-if="!spec.aggregation">vs. <b>{{spec.y.title}}</b></div>
      </div>
      
      <div class="stats">
        <div>Number of elements: <b>{{spec.stats.num_elements}}</b></div>
        <div>Standard Deviation: <b>{{spec.stats.std | number: 3}}</b></div>
      </div>

      <div class="choose" ng-if="$index==selectedSpecIndex">
        <div class="select" ng-click="chooseSpec($index); $event.stopPropagation();">
          <img src="/assets/images/check.svg" />
        </div>
        <div class="reject" ng-click="rejectSpec($index); $event.stopPropagation();">
          <img src="/assets/images/cross.svg" />
        </div>
      </div>
    </li>
  </ul>
</section>

<section class="viewport" ng-class="{'right-closed': rightClosed, 'left-closed': leftClosed}" maxheight>
  <pane-toggle></pane-toggle>
  <loader></loader>
  <div id="viz-container"></div>
  <visualization-preview viz-type="selectedType" viz-spec="selectedSpec" viz-data="vizData" conditional="selectedConditionalValues"></visualization-preview>

  <section class="conditionals card">
    <div class="title">Conditionals</div>
    <ul class="conditional-options options">
      <li class="conditional-option option" ng-repeat="conditionalOption in conditionalOptions" ng-click="selectConditional(conditionalOption)" ng-class="{'selected':selectedConditional(conditionalOption.name)}">
        {{conditionalOption.name}}
      </li>
    </ul>
    <div class="dropdowns">
      <ul class="dropdowns" ng-if="!numeric">
        <li ng-repeat="(title, data) in selectedConditionalData">
          <label class="dropdown-label">{{title}}</label>
          <select 
            ng-if="!isNumeric(selectedConditionalTypes[title])" 
            ng-model="selectedConditionalValues[currentdID][title]" 
            ng-options="datum for datum in data" 
            ng-change="changedConditional()" ng-init="selectedConditionalValues[currentdID][title]=data[0]">
          </select>
          {{selectedConditionalStats[title].min}}
          {{selectedConditionalStats[title].max}}
          {{selectedConditionalSliders[title]}}


          <slider floor="100" ceiling="1000" step="50" precision="2" ng-model="item"></slider>

          <slider ng-if="isNumeric(selectedConditionalTypes[title])" floor="0"  ceiling="10" ng-model-low="low" ng-model-high="high">
          </slider>

          <slider 
            ng-if="isNumeric(selectedConditionalTypes[title])" 
            floor="0" 
            ceiling="10"
            step="selectedConditionalStats[title].step" 
            ng-model-low="selectedConditionalStats[title].min" 
            ng-model-high="selectedConditionalStats[title].max">
          </slider>
        </li>
      </ul>
      {{selectedConditionalStats}}
      {{selectedConditionalTypes}}

    </div>
  </section>
  <section class="configurations card">
    <div class="title">Configuration</div>
  </section>
</section>