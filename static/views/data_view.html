<engine-top-bar></engine-top-bar>

<section class="left-pane" ng-class="{'closed': leftClosed}">
  <div class="pane-title">
    Choose Data Sources
  </div>
  <ul class="pane-items">
    <li>
      <div class="vertical-center title">Connect to Database</div>
    </li>
    <li>
      <div class="vertical-center title">Upload File</div>
    </li>
    <li>
      <div class="vertical-center title">Connect to API</div>
    </li>
    <li>
      <div class="vertical-center title">Search DIVE Datasets</div>
    </li>
  </ul>

<!--   <form id="upload-form" method="post" enctype="multipart/form-data">
    <label for="dataset">Select a dataset to upload</label>
    <input id="data-file" type="file" name="dataset">
    <button id="data-submit">Upload</button>
  </form> -->
</section>

<section class="right-pane" ng-class="{'closed': rightClosed}">
  <div class="pane-title">
    Inspect Datasets
  </div>
  <ul class="pane-items">
    <li ng-repeat="dataset in datasets" class="dataset" ng-click="select_dataset($index)" ng-class="{'selected':$index==selected_index}">
      <div class="title">{[{dataset.title}]}</div>
      <div class="dimensions">
        <span class="rows">{[{dataset.rows}]} Rows</span> x
        <span class="columns">{[{dataset.cols}]} Columns</span>
      </div>
      <div class="type">{[{dataset.filetype}]}</div>
    </li>
  </ul>
</section>

<section class="viewport" ng-class="{'right-closed': rightClosed, 'left-closed': leftClosed}">
  <pane-toggle></pane-toggle>
  <div ng-repeat="dataset in datasets" ng-if="$index==selected_index">
    <div class="dataset-preview" ng-if="dataset.sample">
      <input type="text" ng-model="dataset.title">
      <table>
        <tr>
          <td ng-repeat="attr in dataset.column_attrs">    
            <input type="text" ng-model="attr.name">
          </td>
        </tr>
        <tr>
          <td ng-repeat="attr in dataset.column_attrs">
            <select ng-model="attr.type" ng-options="type for type in types" class="type-select">
          </td>
        </tr>

       <tr ng-repeat="(index, row) in dataset.sample">
          <td ng-repeat="elem in row"> {[{elem}]} </td>
        </tr>
      </table>
    </div>
  </div>
</section>