// Generated by CoffeeScript 1.6.3
(function() {
  diveApp.service("AllProjectsService", function($http) {
    return {
      promise: function(userName, callback) {
        return $http.get('/api/project', {
          params: {
            user_name: userName
          }
        }).success(function(result) {
          return callback(result);
        });
      }
    };
  });

  engineApp.service("ProjectIDService", function($http, $stateParams, $rootScope) {
    return {
      promise: function(formattedProjectTitle) {
        console.log("Requesting projectID for project title:", formattedProjectTitle);
        return $http.get("/api/getProjectID", {
          params: {
            formattedProjectTitle: formattedProjectTitle
          }
        }).success(function(pID) {
          return $rootScope.pID = pID;
        });
      }
    };
  });

  engineApp.service("DataService", function($http, $rootScope) {
    return {
      promise: function(callback) {
        return $http.get("/api/data", {
          params: {
            pID: $rootScope.pID,
            sample: true
          }
        }).success(function(data) {
          return callback(data.datasets);
        });
      }
    };
  });

  engineApp.service("PropertyService", function($http, $rootScope) {
    return {
      promise: function(callback) {
        return $http.get("/api/property", {
          params: {
            pID: $rootScope.pID
          }
        }).success(function(data) {
          return callback(data);
        });
      }
    };
  });

  engineApp.service("VizFromOntologyService", function($http) {
    return {
      promise: function(initNetwork, callback) {
        return $.ajax({
          url: "get_visualizations_from_ontology",
          type: "POST",
          data: JSON.stringify(initNetwork),
          cache: false,
          processData: false,
          contentType: false
        }).success(function(result) {
          return callback(result);
        });
      }
    };
  });

  engineApp.service("VizDataService", function($http) {
    return {
      promise: function(vizSpec, callback) {
        return $http.get("get_treemap_data", {
          params: {
            condition: vizSpec.condition,
            aggregate: vizSpec.aggregate,
            query: "*",
            groupBy: vizSpec.groupBy
          }
        }).success(function(result) {
          return callback(result);
        });
      }
    };
  });

}).call(this);
